<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Deployment Workflow Guide - Prisma AIRS MCP</title>
  <meta name="description" content="AI Runtime Security through Model Context Protocol - Secure your AI applications with enterprise-grade threat detection">
  
  <!-- SEO -->
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="Deployment Workflow Guide" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="AI Runtime Security through Model Context Protocol - Secure your AI applications with enterprise-grade threat detection" />
<meta property="og:description" content="AI Runtime Security through Model Context Protocol - Secure your AI applications with enterprise-grade threat detection" />
<link rel="canonical" href="https://cdot65.github.io/prisma-airs-mcp/DEPLOYMENT-WORKFLOW.html" />
<meta property="og:url" content="https://cdot65.github.io/prisma-airs-mcp/DEPLOYMENT-WORKFLOW.html" />
<meta property="og:site_name" content="Prisma AIRS MCP" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Deployment Workflow Guide" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"AI Runtime Security through Model Context Protocol - Secure your AI applications with enterprise-grade threat detection","headline":"Deployment Workflow Guide","url":"https://cdot65.github.io/prisma-airs-mcp/DEPLOYMENT-WORKFLOW.html"}</script>
<!-- End Jekyll SEO tag -->

  
  <!-- CSS -->
  <link rel="stylesheet" href="/prisma-airs-mcp/assets/css/style.css">
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/prisma-airs-mcp/assets/favicon.png">
</head>
<body>
  <h1 id="deployment-workflow-guide">Deployment Workflow Guide</h1>

<p>This guide explains the complete deployment workflow for the Prisma AIRS MCP server.</p>

<h2 id="quick-start">Quick Start</h2>

<h3 id="deploy-latest-changes-development">Deploy Latest Changes (Development)</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Quick deploy to development without version update</span>
pnpm run deploy:quick:dev
</code></pre></div></div>

<h3 id="deploy-to-production-with-version">Deploy to Production with Version</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Full production deployment with new version</span>
pnpm run deploy:prod:version 1.3.3
</code></pre></div></div>

<h2 id="available-deployment-commands">Available Deployment Commands</h2>

<h3 id="validation--building">Validation &amp; Building</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">pnpm run deploy:validate</code> - Run all code quality checks</li>
  <li><code class="language-plaintext highlighter-rouge">pnpm run deploy:build</code> - Validate and build Docker image</li>
  <li><code class="language-plaintext highlighter-rouge">pnpm run deploy:publish</code> - Build and push to registry</li>
</ul>

<h3 id="quick-deployment-no-version-update">Quick Deployment (No Version Update)</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">pnpm run deploy:quick</code> - Deploy to development</li>
  <li><code class="language-plaintext highlighter-rouge">pnpm run deploy:quick:dev</code> - Deploy to development</li>
  <li><code class="language-plaintext highlighter-rouge">pnpm run deploy:quick:staging</code> - Deploy to staging</li>
</ul>

<h3 id="production-deployment">Production Deployment</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">pnpm run deploy:prod</code> - Full production deployment (latest tag)</li>
  <li><code class="language-plaintext highlighter-rouge">pnpm run deploy:prod:version</code> - Production deployment with version</li>
</ul>

<h3 id="kubernetes-operations">Kubernetes Operations</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">pnpm run k8s:status</code> - Check deployment status</li>
  <li><code class="language-plaintext highlighter-rouge">pnpm run k8s:rollout:status</code> - Monitor current rollout</li>
  <li><code class="language-plaintext highlighter-rouge">pnpm run k8s:rollout:restart</code> - Restart pods</li>
  <li><code class="language-plaintext highlighter-rouge">pnpm run k8s:rollback</code> - Rollback to previous version</li>
</ul>

<h2 id="deployment-workflows">Deployment Workflows</h2>

<h3 id="1-development-deployment-quick">1. Development Deployment (Quick)</h3>

<p>For testing changes in development environment:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Make your code changes</span>
git add <span class="nb">.</span>
git commit <span class="nt">-m</span> <span class="s2">"Fix: AIRS profile configuration"</span>

<span class="c"># Deploy to development</span>
pnpm run deploy:quick:dev

<span class="c"># Check status</span>
pnpm run k8s:status
</code></pre></div></div>

<h3 id="2-staging-deployment">2. Staging Deployment</h3>

<p>For testing before production:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Deploy to staging</span>
pnpm run deploy:quick:staging

<span class="c"># Monitor deployment</span>
pnpm run k8s:rollout:status
</code></pre></div></div>

<h3 id="3-production-deployment-versioned">3. Production Deployment (Versioned)</h3>

<p>For official releases:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Update version and deploy</span>
pnpm run deploy:prod:version 1.3.3

<span class="c"># This will:</span>
<span class="c"># 1. Update package.json version</span>
<span class="c"># 2. Run all validations</span>
<span class="c"># 3. Build Docker image</span>
<span class="c"># 4. Push to registry with version tag</span>
<span class="c"># 5. Update Kubernetes deployment</span>
<span class="c"># 6. Monitor rollout</span>
<span class="c"># 7. Verify health check</span>

<span class="c"># After successful deployment:</span>
git add <span class="nb">.</span>
git commit <span class="nt">-m</span> <span class="s2">"chore: Deploy v1.3.3"</span>
git tag v1.3.3
git push origin main <span class="nt">--tags</span>
</code></pre></div></div>

<h3 id="4-hotfix-deployment">4. Hotfix Deployment</h3>

<p>For urgent fixes:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Make fix</span>
git add <span class="nb">.</span>
git commit <span class="nt">-m</span> <span class="s2">"hotfix: Critical bug fix"</span>

<span class="c"># Deploy without version update</span>
pnpm run deploy:prod

<span class="c"># Or with patch version</span>
pnpm run deploy:prod:version 1.3.4
</code></pre></div></div>

<h3 id="5-rollback-procedure">5. Rollback Procedure</h3>

<p>If deployment fails:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># View rollout history</span>
pnpm run k8s:rollback

<span class="c"># Rollback to previous version</span>
pnpm run k8s:rollback

<span class="c"># Or rollback to specific revision</span>
pnpm run k8s:rollback 5
</code></pre></div></div>

<h2 id="deployment-checklist">Deployment Checklist</h2>

<h3 id="before-deployment">Before Deployment</h3>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Code changes tested locally</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />All tests passing</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Version updated in <code class="language-plaintext highlighter-rouge">version.json</code></li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Environment variables documented</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />ConfigMap changes applied (if needed)</li>
</ul>

<h3 id="during-deployment">During Deployment</h3>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Validation passes</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Docker build succeeds</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Image pushed to registry</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Kubernetes deployment updated</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Rollout completes successfully</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Health check passes</li>
</ul>

<h3 id="after-deployment">After Deployment</h3>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Verify application at https://airs.cdot.io/prisma-airs/health</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Check logs for errors</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Test MCP functionality</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Commit version changes</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Tag release in Git</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Update release notes</li>
</ul>

<h2 id="environment-specific-notes">Environment-Specific Notes</h2>

<h3 id="development">Development</h3>

<ul>
  <li>Namespace: <code class="language-plaintext highlighter-rouge">prisma-airs</code></li>
  <li>Replicas: 1</li>
  <li>Image: Local builds allowed</li>
  <li>Rate limiting: Relaxed</li>
</ul>

<h3 id="staging">Staging</h3>

<ul>
  <li>Namespace: <code class="language-plaintext highlighter-rouge">prisma-airs</code></li>
  <li>Replicas: 2</li>
  <li>Image: Must be from registry</li>
  <li>Rate limiting: Moderate</li>
</ul>

<h3 id="production">Production</h3>

<ul>
  <li>Namespace: <code class="language-plaintext highlighter-rouge">prisma-airs</code></li>
  <li>Replicas: 3</li>
  <li>Image: Versioned from registry</li>
  <li>Rate limiting: Enforced</li>
  <li>TLS: Required</li>
</ul>

<h2 id="troubleshooting">Troubleshooting</h2>

<h3 id="build-failures">Build Failures</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Clean and rebuild</span>
pnpm run clean
pnpm run build

<span class="c"># Check Docker daemon</span>
docker info
</code></pre></div></div>

<h3 id="push-failures">Push Failures</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Login to registry</span>
<span class="nb">echo</span> <span class="nv">$GITHUB_TOKEN</span> | docker login ghcr.io <span class="nt">-u</span> cdot65 <span class="nt">--password-stdin</span>

<span class="c"># Retry push</span>
pnpm run docker:publish
</code></pre></div></div>

<h3 id="deployment-failures">Deployment Failures</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Check pod status</span>
kubectl get pods <span class="nt">-n</span> prisma-airs

<span class="c"># View logs</span>
kubectl logs <span class="nt">-l</span> <span class="nv">app</span><span class="o">=</span>prisma-airs-mcp <span class="nt">-n</span> prisma-airs

<span class="c"># Describe deployment</span>
kubectl describe deployment prisma-airs-mcp <span class="nt">-n</span> prisma-airs
</code></pre></div></div>

<h3 id="rollback-if-needed">Rollback if Needed</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Quick rollback to previous</span>
pnpm run k8s:rollback

<span class="c"># Check status after rollback</span>
pnpm run k8s:status
</code></pre></div></div>

<h2 id="security-considerations">Security Considerations</h2>

<ol>
  <li><strong>API Keys</strong>: Never commit API keys. Use Kubernetes secrets</li>
  <li><strong>Image Scanning</strong>: Images are scanned in GitHub registry</li>
  <li><strong>Network Policies</strong>: Applied in production namespace</li>
  <li><strong>RBAC</strong>: Limited permissions for deployment service account</li>
</ol>

<h2 id="monitoring">Monitoring</h2>

<p>After deployment, monitor:</p>

<ul>
  <li>Health endpoint: https://airs.cdot.io/prisma-airs/health</li>
  <li>Logs: <code class="language-plaintext highlighter-rouge">kubectl logs -f -l app=prisma-airs-mcp -n prisma-airs</code></li>
  <li>Metrics: Check Kubernetes dashboard</li>
  <li>Alerts: Set up for production failures</li>
</ul>

<h2 id="best-practices">Best Practices</h2>

<ol>
  <li><strong>Always validate</strong> before deployment</li>
  <li><strong>Use versioned deployments</strong> for production</li>
  <li><strong>Monitor rollout</strong> completion</li>
  <li><strong>Test after deployment</strong></li>
  <li><strong>Keep rollback plan</strong> ready</li>
  <li><strong>Document changes</strong> in commit messages</li>
  <li><strong>Tag releases</strong> in Git</li>
</ol>

</body>
</html>